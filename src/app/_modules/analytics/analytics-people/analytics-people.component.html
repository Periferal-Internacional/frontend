<nz-table *ngIf="users" #basicTable [nzData]="users">
  <thead>
    <tr>
      <th>Progreso</th>
      <th>Nombre</th>
      <th>Posici√≥n</th>
      <th>Planta</th>
      <th>Entregas</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let user of users; index as i">
      <tr>
        <td [nzExpand]="expandSet.has(user.user.id)" (nzExpandChange)="onExpandChange(user.user.id, $event)"></td>
        <td>{{user.user.name}} {{user.user.lastName1}}</td>
        <td>{{user.user.position}}</td>
        <td>{{user.plant.city}}</td>
        <td>
          <a (click)="open('JI', user)">JI</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a (click)="open('JR', user)">JR</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a (click)="open('JM', user)">JM</a>
        </td>
      </tr>
      <tr [nzExpand]="expandSet.has(user.user.id)">
          <small>Job Instructions</small>
          <nz-progress [nzPercent]="(user.user.xp_ji / 150 * 100).toFixed(0)" nzStrokeColor="{{getColor(user.user.xp_ji)}}" ></nz-progress>
          <small>Job Methods</small>
          <nz-progress [nzPercent]="(user.user.xp_jm / 150 * 100).toFixed(0)" nzStrokeColor="{{getColor(user.user.xp_jm)}}"></nz-progress>
          <small>Job Relations</small>
          <nz-progress [nzPercent]="(user.user.xp_jr / 150 * 100).toFixed(0)" nzStrokeColor="{{getColor(user.user.xp_jr)}}"></nz-progress>
      </tr>
    </ng-container>
  </tbody>
</nz-table>

<nz-drawer
      [nzClosable]="false"
      [nzVisible]="visible"
      nzPlacement="right"
      nzTitle="Entregables de {{chosenUser.user.name}} {{chosenUser.user.lastName1}}"
      (nzOnClose)="close()"
      [nzWidth]="350"
    >
      <ng-container *nzDrawerContent>
          <nz-card *ngFor="let document of deliverables" style="width:300px; margin-bottom: 20px;" [nzCover]="coverTemplate" [nzActions]="[actionDownload]">
              <nz-card-meta
                nzTitle="{{document.name}}"
                nzDescription="{{document.comment}}"
              ></nz-card-meta>
            </nz-card>
            <ng-template #coverTemplate>
              <img alt="example" src="../../../../assets/img/pdf.png" width="50%"/>
            </ng-template>
            <ng-template #actionDownload>
              <i nz-icon nzType="download"></i>
            </ng-template>
            <ng-template #actionEdit>
              <i nz-icon nzType="ellipsis"></i>
            </ng-template>
      </ng-container>
    </nz-drawer>